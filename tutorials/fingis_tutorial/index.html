<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>fingis vignette &mdash; rOpenGov</title>
  <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/assets/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/images/logo.png"/>
  <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="rOpenGov" />
  <meta name="title" content="fingis vignette ">
  <link rel="canonical" href="http://ropengov.github.io/tutorials/fingis_tutorial/">
   
         
  <meta property="og:title" content="fingis vignette "/>
  <meta property="og:url" content="http://ropengov.github.io/tutorials/fingis_tutorial/"/>
  
  
  <meta property="og:site_name" content="rOpenGov">     
</head>
<body>
  
  <section class="site-nav">
  <header>
      <nav id="navigation">
          <a class="brand" href="/">
              <img src="/images/logo.png" alt="rOpenGov">
          </a>
          <a href="/" class="home">Blog</a>
          
          <a href="http://ropengov.github.io/projects">Projects</a>
          <a href="http://ropengov.github.io/about">About</a>
          <a href="http://ropengov.github.io/contribute">Contribute</a>          
      </nav>
      
  </header>
  </section>

  <article class="container">

  <div class="span11">
  <div class="row">

  <header class="jumbotron subhead" id="overview"> 
     <iframe src="http://ghbtns.com/github-btn.html?user=ropengov&repo=fingis&type=watch&count=true&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="170" height="30" align="right"></iframe>
     <iframe src="http://ghbtns.com/github-btn.html?user=ropengov&repo=fingis&type=fork&count=true&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="170" height="30" align="right"></iframe>      

     <h1> <i class="fa fa-book"></i>  fingis <small>v0.9.9</small> </h1>
  </header>
    
  </div>
  <!-- <br> -->

  <div class"row"> <h2> <em> R tools for reading open geographical data in Finland. </em> </h2>

  <!-- <h3><i class="ss-icon" style="color:#ebeef6;">&#x2139;</i>&nbsp;&nbsp;This is the vignette in the fingis package</h3> -->
  <br>

  <center><a href="https://github.com/ropengov/fingis/" style="color:#ffffff" target="_blank"> <button class="btn btn-success btn-large" style="display: block; width: 75%;"><i class="icon-white icon-download"></i>Download from GitHub</button></a></center>
  <br>
  <!-- <hr class="soften"> -->
  </div>
  <div class="span11">
  <h1 id="finland_gis_r_tools">Finland GIS R tools</h1>

<p>This is an <a href="https://github.com/rOpenGov/fingis">rOpenGov</a> R package providing tools for Finnish GIS data.</p>

<h2 id="available_data">Available data</h2>

<p>The following data sets are currently available:</p>

<ul>
<li><a href="#helsinki-region-aluejakokartat">Helsinki region aluejakokartat</a></li>

<li><a href="#helsinki-spatial-data">Helsinki spatial data</a></li>

<li><a href="#maanmittauslaitos">Maanmittauslaitos</a></li>

<li><a href="#geocoding">Geocoding</a></li>
</ul>

<h3 id="installation">Installation</h3>

<p>Note! The fingis package uses the <a href="http://cran.r-project.org/web/packages/rgdal/index.html">rgdal</a> library, which depends on the <a href="http://www.gdal.org/">GDAL</a> spatial framework. Some rgdal installation tips for various platforms lister below. If you encounter problems, please contact us by email: louhos@googlegroups.com.</p>

<ul>
<li>Windows: Install binaries from <a href="http://cran.r-project.org/web/packages/rgdal/index.html">CRAN</a></li>

<li>OSX: Install binaries from <a href="http://cran.r-project.org/web/packages/rgdal/index.html">CRAN</a>. Check also <a href="http://www.kyngchaos.com/software/frameworks">KyngChaos Wiki</a></li>

<li>Linux: Try the installation scripts <a href="https://github.com/louhos/takomo/tree/master/installation/">here</a> (not necessarily up-to-date!)</li>
</ul>

<p>Release version for general users (NOT AVAILABLE YET):</p>

<p>Development version for developers:</p>
<div class='highlight'><pre><code class='r'>install.packages<span class='p'>(</span><span class='s'>&quot;devtools&quot;</span><span class='p'>)</span>
library<span class='p'>(</span>devtools<span class='p'>)</span>
install_github<span class='p'>(</span><span class='s'>&quot;fingis&quot;</span><span class='p'>,</span> <span class='s'>&quot;ropengov&quot;</span><span class='p'>)</span>
</code></pre></div>
<p>Load package.</p>
<div class='highlight'><pre><code class='r'>library<span class='p'>(</span>fingis<span class='p'>)</span>
</code></pre></div><div class='highlight'><pre><code class='text'>## Loading required package: rgdal
## Loading required package: methods
## Loading required package: sp
## rgdal: version: 0.8-16, (SVN revision 498)
## Geospatial Data Abstraction Library extensions to R successfully loaded
## Loaded GDAL runtime: GDAL 1.9.2, released 2012/10/08
## Path to GDAL shared files: /Library/Frameworks/R.framework/Versions/3.0/Resources/library/rgdal/gdal
## Loaded PROJ.4 runtime: Rel. 4.8.0, 6 March 2012, [PJ_VERSION: 480]
## Path to PROJ.4 shared files: /Library/Frameworks/R.framework/Versions/3.0/Resources/library/rgdal/proj
## fingis R package: tools for open GIS data for Finland.
## This R package is part of rOpenGov &lt;ropengov.github.io&gt;.
## Copyright (C) 2010-2014 Leo Lahti, Juuso Parkkinen and Joona Lehtomaki.
## This is free software. You are free to use, modify and redistribute it under the FreeBSD license.
</code></pre></div>
<p>Further development instructions at the <a href="https://github.com/rOpenGov/fingis">Github page</a>.</p>

<h3 id="helsinki_region_aluejakokartat">Helsinki region aluejakokartat</h3>

<p>Helsinki region aluejakokartat (district maps) from <a href="http://ptp.hel.fi/avoindata/">HKK</a>.</p>

<p>List available maps with <code>get_Helsinki_aluejakokartat()</code>.</p>
<div class='highlight'><pre><code class='r'>get_Helsinki_aluejakokartat<span class='p'>()</span>
</code></pre></div><div class='highlight'><pre><code class='text'>## [1] &quot;kunta&quot;             &quot;pienalue&quot;          &quot;pienalue_piste&quot;   
## [4] &quot;suuralue&quot;          &quot;suuralue_piste&quot;    &quot;tilastoalue&quot;      
## [7] &quot;tilastoalue_piste&quot; &quot;aanestysalue&quot;
</code></pre></div>
<p>Retrieve ‘suuralue’ spatial object with <code>get_Helsinki_aluejakokartat()</code>, and plot with <code>plot_shape()</code>.</p>
<div class='highlight'><pre><code class='r'>sp.suuralue <span class='o'>&lt;-</span> get_Helsinki_aluejakokartat<span class='p'>(</span>map.specifier <span class='o'>=</span> <span class='s'>&quot;suuralue&quot;</span><span class='p'>)</span>
plot_shape<span class='p'>(</span>sp <span class='o'>=</span> sp.suuralue<span class='p'>,</span> varname <span class='o'>=</span> <span class='s'>&quot;Name&quot;</span><span class='p'>,</span> type <span class='o'>=</span> <span class='s'>&quot;discrete&quot;</span><span class='p'>,</span> plot <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>)</span>
</code></pre></div>
<p><img src="http://i.imgur.com/vAierGN.png" alt="plot of chunk hkk-suuralue1" /></p>

<p>Retrieve ‘suuralue_piste’ spatial object, containing the center points of the districts, and plot with <code>spplot()</code>.</p>
<div class='highlight'><pre><code class='r'>sp.suuralue.piste <span class='o'>&lt;-</span> get_Helsinki_aluejakokartat<span class='p'>(</span>map.specifier <span class='o'>=</span> <span class='s'>&quot;suuralue_piste&quot;</span><span class='p'>)</span>
sp<span class='o'>::</span>spplot<span class='p'>(</span>obj <span class='o'>=</span> sp.suuralue.piste<span class='p'>,</span> zcol <span class='o'>=</span> <span class='s'>&quot;Name&quot;</span><span class='p'>)</span>
</code></pre></div>
<p><img src="http://i.imgur.com/JzPlqHK.png" alt="plot of chunk hkk-suuralue2" /></p>

<p>Use <code>sp2df()</code> function to tranform the spatial objects into data frames. Plot with <a href="http://ggplot2.org/">ggplot2</a>, using blank map theme with <code>get_theme_map()</code>.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Get data frames</span>
df.suuralue <span class='o'>&lt;-</span> sp2df<span class='p'>(</span>sp.suuralue<span class='p'>,</span> <span class='s'>&quot;Name&quot;</span><span class='p'>)</span>
df.suuralue.piste <span class='o'>&lt;-</span> sp2df<span class='p'>(</span>sp.suuralue.piste<span class='p'>,</span> <span class='s'>&quot;Name&quot;</span><span class='p'>)</span>

<span class='c1'># Set map theme</span>
library<span class='p'>(</span>ggplot2<span class='p'>)</span>
theme_set<span class='p'>(</span>get_theme_map<span class='p'>())</span>
<span class='c1'># Plot regions, add labels using the points data</span>
ggplot<span class='p'>(</span>df.suuralue<span class='p'>,</span> aes<span class='p'>(</span>x <span class='o'>=</span> long<span class='p'>,</span> y <span class='o'>=</span> lat<span class='p'>,</span> fill <span class='o'>=</span> Name<span class='p'>))</span> <span class='o'>+</span> geom_polygon<span class='p'>()</span> <span class='o'>+</span> 
    geom_text<span class='p'>(</span>data <span class='o'>=</span> df.suuralue.piste<span class='p'>,</span> aes<span class='p'>(</span>label <span class='o'>=</span> Name<span class='p'>))</span> <span class='o'>+</span> theme<span class='p'>(</span>legend.position <span class='o'>=</span> <span class='s'>&quot;none&quot;</span><span class='p'>)</span>
</code></pre></div>
<p><img src="http://i.imgur.com/zvzhxvu.png" alt="plot of chunk hkk-suuralue3" /></p>

<p>Add background map from OpenStreetMap using <code>get_map()</code> from <a href="https://sites.google.com/site/davidkahle/ggmap">ggmap</a> and plot again.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Add background map from OpenStreetMap using ggmap</span>
library<span class='p'>(</span>ggmap<span class='p'>)</span>
<span class='c1'># Get bounding box from sp.suuralue</span>
hel.bbox <span class='o'>&lt;-</span> as.vector<span class='p'>(</span>sp.suuralue<span class='o'>@</span>bbox<span class='p'>)</span>
<span class='c1'># Get map using openstreetmap</span>
hel.map <span class='o'>&lt;-</span> ggmap<span class='o'>::</span>get_map<span class='p'>(</span>location <span class='o'>=</span> hel.bbox<span class='p'>,</span> source <span class='o'>=</span> <span class='s'>&quot;osm&quot;</span><span class='p'>)</span>
<span class='c1'># Plot transparent districts on top the background map</span>
ggmap<span class='p'>(</span>hel.map<span class='p'>)</span> <span class='o'>+</span> geom_polygon<span class='p'>(</span>data <span class='o'>=</span> df.suuralue<span class='p'>,</span> aes<span class='p'>(</span>x <span class='o'>=</span> long<span class='p'>,</span> y <span class='o'>=</span> lat<span class='p'>,</span> fill <span class='o'>=</span> Name<span class='p'>),</span> 
    alpha <span class='o'>=</span> <span class='m'>0.5</span><span class='p'>)</span> <span class='o'>+</span> geom_text<span class='p'>(</span>data <span class='o'>=</span> df.suuralue.piste<span class='p'>,</span> aes<span class='p'>(</span>x <span class='o'>=</span> long<span class='p'>,</span> y <span class='o'>=</span> lat<span class='p'>,</span> 
    label <span class='o'>=</span> Name<span class='p'>))</span> <span class='o'>+</span> theme<span class='p'>(</span>legend.position <span class='o'>=</span> <span class='s'>&quot;none&quot;</span><span class='p'>)</span>
</code></pre></div>
<p><img src="http://i.imgur.com/uY6OdeD.png" alt="plot of chunk hkk-suuralue4" /></p>

<p>Retrieve and plot äänetysaluejako (election districts) with <code>get_Helsinki_aluejakokartat()</code> and <code>plot_shape()</code>.</p>
<div class='highlight'><pre><code class='r'>sp.aanestys <span class='o'>&lt;-</span> get_Helsinki_aluejakokartat<span class='p'>(</span>map.specifier <span class='o'>=</span> <span class='s'>&quot;aanestysalue&quot;</span><span class='p'>)</span>
plot_shape<span class='p'>(</span>sp.aanestys<span class='p'>,</span> <span class='s'>&quot;KUNTA&quot;</span><span class='p'>,</span> type <span class='o'>=</span> <span class='s'>&quot;discrete&quot;</span><span class='p'>,</span> plot <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>)</span>
</code></pre></div>
<p><img src="http://i.imgur.com/6DFGacT.png" alt="plot of chunk hkk-aanestysalue" /></p>

<h3 id="helsinki_spatial_data">Helsinki spatial data</h3>

<p>Other Helsinki region spatial data from <a href="http://ptp.hel.fi/avoindata/">HKK</a>.</p>

<p>List available spatial data with <code>get_Helsinki_spatial()</code>.</p>
<div class='highlight'><pre><code class='r'>get_Helsinki_spatial<span class='p'>()</span>
</code></pre></div><div class='highlight'><pre><code class='text'>## $seutukartta
##  [1] &quot;A_es_pie&quot;   &quot;a_hy_suu&quot;   &quot;a_ki_pie&quot;   &quot;a_nu_til&quot;   &quot;a_tu_til&quot;  
##  [6] &quot;l_jrata&quot;    &quot; m_jarvet&quot;  &quot;N_MERI_R&quot;   &quot;A_es_suu&quot;   &quot;a_hy_til&quot;  
## [11] &quot;a_ki_suu&quot;   &quot;a_pkspie&quot;   &quot;a_va_kos&quot;   &quot;l_kiitor&quot;   &quot;m_joet&quot;    
## [16] &quot;  N_MERI_S&quot; &quot;a_es_til&quot;   &quot;a_ja_pie&quot;   &quot;a_ki_til&quot;   &quot;a_pkstil&quot;  
## [21] &quot;a_va_suu&quot;   &quot;l_metras&quot;   &quot;m_meri&quot;     &quot;  N_PAIK_R&quot; &quot;a_hk_osa&quot;  
## [26] &quot;a_ja_til&quot;   &quot;a_kunta&quot;    &quot; a_pksuur&quot;  &quot;a_vi_pie&quot;   &quot;l_metror&quot;  
## [31] &quot;m_rantav&quot;   &quot;N_PAIK_S&quot;   &quot;a_hk_per&quot;   &quot;a_ka_pie&quot;   &quot;a_ma_pie&quot;  
## [36] &quot;a_po_til&quot;   &quot;a_vi_suu&quot;   &quot;l_tiest2&quot;   &quot;m_teolal&quot;   &quot;a_hk_pie&quot;  
## [41] &quot;a_ka_til&quot;   &quot;a_ma_til&quot;   &quot;a_si_pie&quot;   &quot;a_vi_til&quot;   &quot;l_tiesto&quot;  
## [46] &quot;m_vihral&quot;   &quot;a_hk_suu&quot;   &quot;a_ke_pie&quot;   &quot;a_nu_pie&quot;   &quot;a_tu_pie&quot;  
## [51] &quot;Copyrig&quot;    &quot; Maankay2&quot;  &quot;N_KOS_R&quot;    &quot;a_hy_pie&quot;   &quot;a_ke_til&quot;  
## [56] &quot;a_nu_suu&quot;   &quot;a_tu_suu&quot;   &quot;l_jasema&quot;   &quot;m_asalue&quot;   &quot;N_KOS_S&quot;   
## 
## $piirijako
## [1] &quot;ALUEJAKO_KUNTA&quot;             &quot;ALUEJAKO_OSAALUE_TUNNUS&quot;   
## [3] &quot;ALUEJAKO_OSAALUE&quot;           &quot;ALUEJAKO_PERUSPIIRI_TUNNUS&quot;
## [5] &quot;ALUEJAKO_PERUSPIIRI&quot;        &quot;ALUEJAKO_PIENALUE_TUNNUS&quot;  
## [7] &quot;ALUEJAKO_PIENALUE&quot;          &quot;ALUEJAKO_SUURPIIRI_TUNNUS&quot; 
## [9] &quot;ALUEJAKO_SUURPIIRI&quot;        
## 
## $rakennusrekisteri
## [1] &quot;20m2_hkikoord&quot; &quot;etrsgk25&quot;      &quot;hkikoord&quot;      &quot;wgs84&quot;
</code></pre></div>
<h3 id="maanmittauslaitos">Maanmittauslaitos</h3>

<p>Spatial data from Maanmittauslaitos (MML, Land Survey Finland). These data are preprocessed into RData format, see details <a href="https://github.com/avoindata/mml/tree/master/rdata">here</a>.</p>

<p>List available data sets with <code>list_mml_datasets()</code>.</p>
<div class='highlight'><pre><code class='r'>list_mml_datasets<span class='p'>()</span>
</code></pre></div><div class='highlight'><pre><code class='text'>## $`1_milj_Shape_etrs_shape`
##  [1] &quot;AVI1_l&quot;   &quot;AVI1_p&quot;   &quot;airport&quot;  &quot;asemat&quot;   &quot;cityp&quot;    &quot;coast_l&quot; 
##  [7] &quot;coast_p&quot;  &quot;dcont_l&quot;  &quot;dcont_p&quot;  &quot;forest&quot;   &quot;hcont_l&quot;  &quot;hcont_p&quot; 
## [13] &quot;hpoint&quot;   &quot;kunta1_l&quot; &quot;kunta1_p&quot; &quot;lake_l&quot;   &quot;lake_p&quot;   &quot;maaku1_l&quot;
## [19] &quot;maaku1_p&quot; &quot;namep&quot;    &quot;pelto&quot;    &quot;railway&quot;  &quot;river&quot;    &quot;rivera_l&quot;
## [25] &quot;rivera_p&quot; &quot;road&quot;     &quot;suot&quot;     &quot;taajama&quot; 
## 
## $`4_5_milj_shape_etrs-tm35fin`
##  [1] &quot;AVI1_l&quot;   &quot;AVI1_p&quot;   &quot;AVI4_l&quot;   &quot;AVI4_p&quot;   &quot;airport&quot;  &quot;asemat&quot;  
##  [7] &quot;cityp&quot;    &quot;coast&quot;    &quot;coast_l&quot;  &quot;coast_p&quot;  &quot;dcont_l&quot;  &quot;dcont_p&quot; 
## [13] &quot;forest&quot;   &quot;hcont_l&quot;  &quot;hcont_p&quot;  &quot;hpoint&quot;   &quot;kunta1_l&quot; &quot;kunta1_p&quot;
## [19] &quot;kunta4_l&quot; &quot;kunta4_p&quot; &quot;lake&quot;     &quot;lake_l&quot;   &quot;lake_p&quot;   &quot;maaku1_l&quot;
## [25] &quot;maaku1_p&quot; &quot;maaku4_l&quot; &quot;maaku4_p&quot; &quot;namep&quot;    &quot;pelto&quot;    &quot;railway&quot; 
## [31] &quot;rajamuu&quot;  &quot;river&quot;    &quot;rivera_l&quot; &quot;rivera_p&quot; &quot;road&quot;     &quot;suot&quot;    
## [37] &quot;taajama&quot; 
## 
## $`2012`
## character(0)
## 
## $`Maastotietokanta-tiesto1`
## [1] &quot;N61_v&quot;
## 
## $`Maastotietokanta-tiesto2`
## [1] &quot;N62_p&quot; &quot;N62_s&quot; &quot;N62_t&quot; &quot;N62_v&quot;
## 
## $`Yleiskartta-1000`
##  [1] &quot;AmpumaRaja&quot;          &quot;HallintoAlue&quot;        &quot;HallintoalueRaja&quot;   
##  [4] &quot;KaasuJohto&quot;          &quot;KarttanimiPiste500&quot;  &quot;KarttanimiPiste1000&quot;
##  [7] &quot;KorkeusAlue&quot;         &quot;KorkeusViiva500&quot;     &quot;KorkeusViiva1000&quot;   
## [10] &quot;LentokenttaPiste&quot;    &quot;LiikenneAlue&quot;        &quot;MaaAlue&quot;            
## [13] &quot;Maasto1Reuna&quot;        &quot;Maasto2Alue&quot;         &quot;MetsaRaja&quot;          
## [16] &quot;PeltoAlue&quot;           &quot;RautatieViiva&quot;       &quot;SahkoLinja&quot;         
## [19] &quot;SuojaAlue&quot;           &quot;SuojametsaRaja&quot;      &quot;SuojeluAlue&quot;        
## [22] &quot;TaajamaAlue&quot;         &quot;TaajamaPiste&quot;        &quot;TieViiva&quot;           
## [25] &quot;VesiAlue&quot;            &quot;VesiViiva&quot;          
## 
## $`Yleiskartta-4500`
##  [1] &quot;HallintoAlue&quot;        &quot;HallintoalueRaja&quot;    &quot;KarttanimiPiste2000&quot;
##  [4] &quot;KarttanimiPiste4500&quot; &quot;KarttanimiPiste8000&quot; &quot;KorkeusAlue&quot;        
##  [7] &quot;KorkeusViiva&quot;        &quot;Maasto1Reuna&quot;        &quot;RautatieViiva&quot;      
## [10] &quot;TaajamaPiste2000&quot;    &quot;TaajamaPiste4500&quot;    &quot;TaajamaPiste8000&quot;   
## [13] &quot;TieViiva2000&quot;        &quot;TieViiva4500&quot;        &quot;TieViiva8000&quot;       
## [16] &quot;VesiAlue&quot;            &quot;VesiViiva2000&quot;       &quot;VesiViiva4500&quot;      
## [19] &quot;VesiViiva8000&quot;
</code></pre></div>
<p>Retrieve regional borders for Finland with <code>get_MML()</code>.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Get a specific map</span>
sp.mml <span class='o'>&lt;-</span> get_MML<span class='p'>(</span>map.id <span class='o'>=</span> <span class='s'>&quot;Yleiskartta-4500&quot;</span><span class='p'>,</span> data.id <span class='o'>=</span> <span class='s'>&quot;HallintoAlue&quot;</span><span class='p'>)</span>

<span class='c1'># Investigate available variables in this map</span>
head<span class='p'>(</span>as.data.frame<span class='p'>(</span>sp.mml<span class='p'>))</span>
</code></pre></div><div class='highlight'><pre><code class='text'>##   Kohderyhma Kohdeluokk Enklaavi AVI Maakunta Kunta
## 0         71      84200        1   1       01   078
## 1         71      84200        1   1       01   149
## 2         71      84200        1   7       21   318
## 3         71      84200        1   1       01   710
## 4         71      84200        1   1       01   235
## 5         71      84200        1   7       21   062
##                            AVI_ni1
## 0 Etelä-Suomen aluehallintovirasto
## 1 Etelä-Suomen aluehallintovirasto
## 2       Ahvenanmaan valtionvirasto
## 3 Etelä-Suomen aluehallintovirasto
## 4 Etelä-Suomen aluehallintovirasto
## 5       Ahvenanmaan valtionvirasto
##                                    AVI_ni2            Maaku_ni1
## 0 Regionförvaltningsverket i Södra Finland              Uusimaa
## 1 Regionförvaltningsverket i Södra Finland              Uusimaa
## 2              Statens ämbetsverk på Åland Ahvenanmaan maakunta
## 3 Regionförvaltningsverket i Södra Finland              Uusimaa
## 4 Regionförvaltningsverket i Södra Finland              Uusimaa
## 5              Statens ämbetsverk på Åland Ahvenanmaan maakunta
##          Maaku_ni2  Kunta_ni1 Kunta_ni2 Kieli_ni1 Kieli_ni2
## 0           Nyland      Hanko     Hangö     Suomi    Ruotsi
## 1           Nyland       Ingå     Inkoo    Ruotsi     Suomi
## 2 Landskapet Åland      Kökar       N_A    Ruotsi       N_A
## 3           Nyland   Raseborg Raasepori    Ruotsi     Suomi
## 4           Nyland Kauniainen Grankulla     Suomi    Ruotsi
## 5 Landskapet Åland      Föglö       N_A    Ruotsi       N_A
##                             AVI.FI Kieli.FI          Maakunta.FI
## 0 Etelä-Suomen aluehallintovirasto    Suomi              Uusimaa
## 1 Etelä-Suomen aluehallintovirasto   Ruotsi              Uusimaa
## 2       Ahvenanmaan valtionvirasto   Ruotsi Ahvenanmaan maakunta
## 3 Etelä-Suomen aluehallintovirasto   Ruotsi              Uusimaa
## 4 Etelä-Suomen aluehallintovirasto    Suomi              Uusimaa
## 5       Ahvenanmaan valtionvirasto   Ruotsi Ahvenanmaan maakunta
##     Kunta.FI
## 0      Hanko
## 1      Inkoo
## 2      Kökar
## 3  Raasepori
## 4 Kauniainen
## 5      Föglö
</code></pre></div>
<p>Plot provinces (maakunnat) with <code>plot_shape()</code>.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Plot the shape file, colour provinces</span>
plot_shape<span class='p'>(</span>sp <span class='o'>=</span> sp.mml<span class='p'>,</span> varname <span class='o'>=</span> <span class='s'>&quot;Maakunta&quot;</span><span class='p'>,</span> type <span class='o'>=</span> <span class='s'>&quot;discrete&quot;</span><span class='p'>,</span> plot <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>)</span>
</code></pre></div>
<p><img src="http://i.imgur.com/WwL8YDM.png" alt="plot of chunk MML_province" /></p>

<p>Plot municipalities (kunnat) with <code>plot_shape()</code>.</p>
<div class='highlight'><pre><code class='r'><span class='c1'># Plot the shape file, colour municipalities</span>
plot_shape<span class='p'>(</span>sp <span class='o'>=</span> sp.mml<span class='p'>,</span> varname <span class='o'>=</span> <span class='s'>&quot;Kunta&quot;</span><span class='p'>,</span> type <span class='o'>=</span> <span class='s'>&quot;discrete&quot;</span><span class='p'>,</span> plot <span class='o'>=</span> <span class='kc'>FALSE</span><span class='p'>)</span>
</code></pre></div>
<p><img src="http://i.imgur.com/NgkooNN.png" alt="plot of chunk MML_municipality" /></p>

<h3 id="geocoding">Geocoding</h3>

<p>Get geocodes for given location (address etc.) using one of the available services. Please read carefully the usage policies for the different services:</p>

<ul>
<li><a href="http://data.okf.fi/console/">OKF.fi Geocoding API Test Console</a></li>

<li><a href="http://wiki.openstreetmap.org/wiki/Nominatim_usage_policy">OpenStreetMap Nominatim</a></li>

<li><a href="http://code.google.com/apis/maps/documentation/geocoding/">Google</a></li>
</ul>

<p>The function <code>get_geocode()</code> returns both latitude and longitude for the first hit, and the raw output (varies depending on the service used).</p>
<div class='highlight'><pre><code class='r'>gc1 <span class='o'>&lt;-</span> get_geocode<span class='p'>(</span><span class='s'>&quot;Mannerheimintie 100, Helsinki&quot;</span><span class='p'>,</span> service <span class='o'>=</span> <span class='s'>&quot;okf&quot;</span><span class='p'>)</span>
unlist<span class='p'>(</span>gc1<span class='p'>[</span><span class='m'>1</span><span class='o'>:</span><span class='m'>2</span><span class='p'>])</span>
</code></pre></div><div class='highlight'><pre><code class='text'>##   lat   lon 
## 60.17 24.94
</code></pre></div><div class='highlight'><pre><code class='r'>gc2 <span class='o'>&lt;-</span> get_geocode<span class='p'>(</span><span class='s'>&quot;Mannerheimintie 100, Helsinki&quot;</span><span class='p'>,</span> service <span class='o'>=</span> <span class='s'>&quot;openstreetmap&quot;</span><span class='p'>)</span>
unlist<span class='p'>(</span>gc2<span class='p'>[</span><span class='m'>1</span><span class='o'>:</span><span class='m'>2</span><span class='p'>])</span>
</code></pre></div><div class='highlight'><pre><code class='text'>##   lat   lon 
## 60.19 24.92
</code></pre></div><div class='highlight'><pre><code class='r'>gc3 <span class='o'>&lt;-</span> get_geocode<span class='p'>(</span><span class='s'>&quot;Mannerheimintie 100, Helsinki&quot;</span><span class='p'>,</span> service <span class='o'>=</span> <span class='s'>&quot;google&quot;</span><span class='p'>)</span>
unlist<span class='p'>(</span>gc3<span class='p'>[</span><span class='m'>1</span><span class='o'>:</span><span class='m'>2</span><span class='p'>])</span>
</code></pre></div><div class='highlight'><pre><code class='text'>##   lat   lon 
## 60.19 24.92
</code></pre></div>
<h3 id="licensing_and_citations">Licensing and Citations</h3>

<p>This work can be freely used, modified and distributed under the <a href="http://en.wikipedia.org/wiki/BSD\_licenses">Two-clause FreeBSD license</a>. Cite this R package and and the appropriate data provider, including a url link. Kindly cite the R package as ‘Leo Lahti, Juuso Parkkinen ja Joona Lehtomäki (2014). fingis R package. URL: https://github.com/rOpenGov/fingis’.</p>

<h3 id="session_info">Session info</h3>

<p>This vignette was created with</p>
<div class='highlight'><pre><code class='r'>sessionInfo<span class='p'>()</span>
</code></pre></div><div class='highlight'><pre><code class='text'>## R version 3.0.3 (2014-03-06)
## Platform: x86_64-apple-darwin10.8.0 (64-bit)
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] methods   stats     graphics  grDevices utils     datasets  base     
## 
## other attached packages:
##  [1] mapproj_1.2-2   maps_2.3-6      ggmap_2.3       ggplot2_0.9.3.1
##  [5] rgeos_0.3-4     maptools_0.8-29 fingis_0.9.9    rgdal_0.8-16   
##  [9] sp_1.0-14       knitr_1.5      
## 
## loaded via a namespace (and not attached):
##  [1] boot_1.3-10         coda_0.16-1         colorspace_1.2-4   
##  [4] deldir_0.1-5        dichromat_2.0-0     digest_0.6.4       
##  [7] evaluate_0.5.1      foreign_0.8-60      formatR_0.10       
## [10] grid_3.0.3          gtable_0.1.2        labeling_0.2       
## [13] lattice_0.20-27     LearnBayes_2.12     MASS_7.3-30        
## [16] Matrix_1.1-2-2      munsell_0.4.2       nlme_3.1-115       
## [19] plyr_1.8.1          png_0.1-7           proto_0.3-10       
## [22] RColorBrewer_1.0-5  Rcpp_0.11.1         RCurl_1.95-4.1     
## [25] reshape2_1.2.2      RgoogleMaps_1.2.0.5 rjson_0.2.13       
## [28] RJSONIO_1.0-3       scales_0.2.3        spdep_0.5-71       
## [31] splines_3.0.3       stringr_0.6.2       tools_3.0.3        
## [34] XML_3.95-0.2
</code></pre></div>
  </div>

  </article>

  <footer class="site-footer">
      <div class="container">
          &copy; 2014 
          
          <nav>
              <a href="http://ropengov.github.io/">rOpenGov</a> &middot;
              <a href="/">Blog</a> &middot;
              
              
          </nav>
          
          <nav class="social">
              
              <a href="https://twitter.com/ropengov" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
              
                  
              <a href="/feed.xml" title="RSS Feed">
                  <i class="icon icon-rss black"></i>
              </a>
          </nav>
          <p>Incorporated theme by <a href="https://sendtoinc.com">Inc</a></p>
      </div>
  </footer>

  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/assets/main.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=253595308025739";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>
    (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44262937-1', 'http://ropengov.github.io');
  ga('send', 'pageview');
</script>

  </body>
</html>