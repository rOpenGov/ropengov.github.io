<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>statfi vignette &mdash; rOpenGov</title>
  <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">
  <link type="text/css" rel="stylesheet" href="/assets/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/images/logo.png"/>
  <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="rOpenGov" />
  <meta name="title" content="statfi vignette ">
  <link rel="canonical" href="http://ropengov.github.io/tutorials/statfi_tutorial/">
   
         
  <meta property="og:title" content="statfi vignette "/>
  <meta property="og:url" content="http://ropengov.github.io/tutorials/statfi_tutorial/"/>
  
  
  <meta property="og:site_name" content="rOpenGov">     
</head>
<body>
  
  <section class="site-nav">
  <header>
      <nav id="navigation">
          <a class="brand" href="/">
              <img src="/images/logo.png" alt="rOpenGov">
          </a>
          <a href="/" class="home">Blog</a>
          
          <a href="http://ropengov.github.io/projects">Projects</a>
          <a href="http://ropengov.github.io/about">About</a>
          <a href="http://ropengov.github.io/contribute">Contribute</a>          
      </nav>
      
  </header>
  </section>

  <article class="container">

  <div class="span11">
  <div class="row">

  <header class="jumbotron subhead" id="overview"> 
     <iframe src="http://ghbtns.com/github-btn.html?user=ropengov&repo=statfi&type=watch&count=true&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="170" height="30" align="right"></iframe>
     <iframe src="http://ghbtns.com/github-btn.html?user=ropengov&repo=statfi&type=fork&count=true&size=large" allowtransparency="true" frameborder="0" scrolling="0" width="170" height="30" align="right"></iframe>      

     <h1> <i class="fa fa-book"></i>  statfi <small>v0.9.83</small> </h1>
  </header>
    
  </div>
  <!-- <br> -->

  <div class"row"> <h2> <em> Statistics Finland (Tilastokeskus) Open Data R Tools </em> </h2>

  <!-- <h3><i class="ss-icon" style="color:#ebeef6;">&#x2139;</i>&nbsp;&nbsp;This is the vignette in the statfi package</h3> -->
  <br>

  <center><a href="https://github.com/ropengov/statfi/" style="color:#ffffff" target="_blank"> <button class="btn btn-success btn-large" style="display: block; width: 75%;"><i class="icon-white icon-download"></i>Download from GitHub</button></a></center>
  <br>
  <!-- <hr class="soften"> -->
  </div>
  <div class="span11">
  <h1 id="statistics-finland-tilastokeskus-r-tools">Statistics Finland (Tilastokeskus) R tools</h1>

<p>This R package provides tools to access open data from <a href="http://www.stat.fi/tup/tilastotietokannat/index_fi.html">Statistics
Finland</a>,
including about 3000 data sets from <a href="http://www.stat.fi/org/lainsaadanto/avoin_data.html">Statistics
Finland</a>.</p>

<p>This R package is part of the <a href="http://ropengov.github.io">rOpenGov</a>
project.</p>

<h2 id="installation">Installation</h2>

<p>Release version for general use:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span></span>install.packages<span class="p">(</span><span class="s">&quot;statfi&quot;</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>statfi<span class="p">)</span></code></pre></figure>

<p>Development version (potentially unstable):</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span></span>install.packages<span class="p">(</span><span class="s">&quot;devtools&quot;</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>devtools<span class="p">)</span>
install_github<span class="p">(</span><span class="s">&quot;statfi&quot;</span><span class="p">,</span> <span class="s">&quot;ropengov&quot;</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>statfi<span class="p">)</span></code></pre></figure>

<h2 id="available-data-sets">Available data sets</h2>

<p>The listings of <a href="http://www.stat.fi/org/lainsaadanto/avoin_data.html">Statistics Finland (StatFi) open
data</a> are
available for browsing in PCAxis, CSV and XML format. These include
the following data collections:</p>

<ul>
  <li>StatFi <a href="http://pxweb2.stat.fi/database/StatFin/databasetree_fi.asp">PCAxis</a> <a href="http://pxweb2.stat.fi/database/StatFin/StatFin_rap_csv.csv">CSV</a> <a href="http://pxweb2.stat.fi/database/StatFin/StatFin_rap_xml.csv">XML</a></li>
  <li>Eurostat <a href="http://pxweb2.stat.fi/Database/Eurostat/databasetree_fi.asp">PCAxis</a> <a href="http://pxweb2.stat.fi/database/StatFin/StatFin_rap.csv">CSV</a></li>
  <li>International statistics <a href="http://pxweb2.stat.fi/Database/Kansainvalisen_tiedon_tietokanta/databasetree_fi.asp">PC Axis</a></li>
</ul>

<p>In summary, browse these listings to find the URL for your data set of
interest. Then use the get_statfi function to download the data in
R. For examples, see below.</p>

<h3 id="listing-the-data-sets-in-r">Listing the data sets in R</h3>

<p>Download statfi open data listings in R as follows:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span></span><span class="c1"># Load the library</span>
<span class="kn">library</span><span class="p">(</span>statfi<span class="p">)</span>

<span class="c1"># Statistics Finland open data listing</span>
datasets.statfi <span class="o">&lt;-</span> list_statfi_files<span class="p">()</span>

<span class="c1"># Descriptions of the first entries</span>
<span class="kp">head</span><span class="p">(</span>datasets.statfi<span class="o">$</span>DESCRIPTION<span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>## [1] &quot;Asuntokunnat koon ja asunnon talotyypin mukaan 1985-2013&quot;                                 
## [2] &quot;Asuntokunnat ja asuntoväestö asuntokunnan koon, huoneluvun ja talotyypin mukaan 2005-2013&quot;
## [3] &quot;Asuntokunnat ja asuntoväestö asumisväljyyden mukaan 1989-2013&quot;                            
## [4] &quot;Asuntokunnat koon, vanhimman iän ja sukupuolen sekä talotyypin mukaan 2005-2013&quot;          
## [5] &quot;Asuntokunnat ja asuntoväestö asuntokunnan koon ja hallintaperusteen mukaan 2005-2013&quot;     
## [6] &quot;Asunnot (lkm) talotyypin, käytössäolon ja rakennusvuoden mukaan 31.12.2013&quot;</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span></span><span class="c1"># Investigate the first entry in StatFi data</span>
<span class="kp">print</span><span class="p">(</span>datasets.statfi<span class="p">[</span><span class="m">1</span><span class="p">,])</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>##                                                                  File
## 1 http://pxweb2.stat.fi/database/StatFin/asu/asas/010_asas_tau_101.px
##      size          created          updated variables
## 1 1271762 2012-02-13 11:27 2014-05-21 06:30         4
##                  tablesize     type LANGUAGE
## 1 (321x8x5) x 29 = 372360  Maksuton       fi
##                                                                  TITLE
## 1 Asuntokunnat muuttujina Alue, Asuntokunnan koko, Talotyyppi ja Vuosi
##                                                DESCRIPTION
## 1 Asuntokunnat koon ja asunnon talotyypin mukaan 1985-2013</code></pre></figure>

<p>This provides the list of statfi data sets. For other international
open statistics available via Statfi, <a href="http://pxweb2.stat.fi/Database/Kansainvalisen_tiedon_tietokanta/databasetree_fi.asp">browse the data sets
manually</a>
to find the URL for your dataset of interest. For Eurostat data, we
recommend the <a href="http://github.com/ropengov/eurostat">eurostat</a> R
package.</p>

<h2 id="retrieving-the-data">Retrieving the data</h2>

<p>Retrieve data from Statfi by defining URL of the data set. For the
listing of available data sets and their corresponding URLs, see
above.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span></span><span class="kn">library</span><span class="p">(</span>statfi<span class="p">)</span>

<span class="c1"># Define URL (see list_statfi_files() or browse manually as described above)</span>
url <span class="o">&lt;-</span> <span class="s">&quot;http://pxweb2.stat.fi/Database/StatFin/tul/tvt/2009/120_tvt_2009_2011-02-18_tau_112_fi.px&quot;</span>

<span class="c1"># Download the data</span>
df <span class="o">&lt;-</span> get_statfi<span class="p">(</span><span class="kp">url</span><span class="p">)</span>
df<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,]</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>## Error in df[1:3, ]: object of type &#39;closure&#39; is not subsettable</code></pre></figure>

<h3 id="statistics-finland-municipality-information"><a name="statfi"></a>Statistics Finland (municipality information)</h3>

<p>Source: <a href="http://pxweb2.stat.fi/Database/Kuntien%20perustiedot/Kuntien%20perustiedot/Kuntaportaali.px">Tilastokeskus</a></p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span></span><span class="c1"># Download Statfi municipality data</span>
municipality.info.statfi <span class="o">&lt;-</span> get_municipality_info_statfi<span class="p">()</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>## Error in eval(expr, envir, enclos): could not find function &quot;get_municipality_info_statfi&quot;</code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span></span><span class="c1"># List available information fields for municipalities</span>
<span class="kp">names</span><span class="p">(</span>municipality.info.statfi<span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>## Error in eval(expr, envir, enclos): object &#39;municipality.info.statfi&#39; not found</code></pre></figure>

<h2 id="licensing-and-citations">Licensing and Citations</h2>

<h3 id="citing-the-data">Citing the Data</h3>

<p>Regarding the data, kindly cite <a href="http://www.statfi.fi/">Statfi</a>. We
are grateful to Statistics Finland open data personnell for their
support during the R package development.</p>

<h3 id="citing-the-r-package">Citing the R package</h3>

<p>This work can be freely used, modified and distributed under the
<a href="http://en.wikipedia.org/wiki/BSD\_licenses">Two-clause FreeBSD
license</a>. Kindly cite the
R package as ‘Leo Lahti, Juuso Parkkinen ja Joona Lehtomäki (C)
2010-2014. statfi R package. URL: http://ropengov.github.io/statfi’.</p>

<h3 id="session-info">Session info</h3>

<p>This tutorial was created with</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span></span>sessionInfo<span class="p">()</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><span></span>## R version 3.1.2 (2014-10-31)
## Platform: x86_64-apple-darwin13.4.0 (64-bit)
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] methods   stats     graphics  grDevices utils     datasets  base     
## 
## other attached packages:
##  [1] statfi_0.9.83      pxR_0.40.0         RJSONIO_1.3-0     
##  [4] reshape2_1.4       stringr_0.6.2      sotkanet_0.9.05   
##  [7] rjson_0.2.14       RColorBrewer_1.0-5 plyr_1.8.1        
## [10] sorvi_0.7.12       reshape_0.8.5      helsinki_0.9.24   
## [13] RCurl_1.95-4.3     bitops_1.0-6       ggplot2_1.0.0     
## [16] rgeos_0.3-4        maptools_0.8-30    gisfin_0.9.16     
## [19] rgdal_0.8-16       raster_2.3-12      sp_1.0-15         
## [22] fmi_0.1.11         R6_2.0             knitr_1.8         
## 
## loaded via a namespace (and not attached):
##  [1] boot_1.3-13      coda_0.16-1      colorspace_1.2-4 deldir_0.1-6    
##  [5] digest_0.6.4     evaluate_0.5.5   foreign_0.8-61   formatR_1.0     
##  [9] grid_3.1.2       gtable_0.1.2     labeling_0.3     lattice_0.20-29 
## [13] LearnBayes_2.15  MASS_7.3-35      Matrix_1.1-4     munsell_0.4.2   
## [17] nlme_3.1-118     parallel_3.1.2   proto_0.3-10     Rcpp_0.11.3     
## [21] rwfs_0.1.11      scales_0.2.4     spdep_0.5-77     splines_3.1.2   
## [25] tools_3.1.2      XML_3.98-1.1</code></pre></figure>


  </div>

  </article>

  <footer class="site-footer">
      <div class="container">
          &copy; 2018 
          
          <nav>
              <a href="ropengov.github.io">rOpenGov</a> &middot;
              <a href="/">Blog</a> &middot;
              
              
          </nav>
          
          <nav class="social">
              
              <a href="https://twitter.com/ropengov" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
              
                  
              <a href="/feed.xml" title="RSS Feed">
                  <i class="icon icon-rss black"></i>
              </a>
          </nav>
          <p>Incorporated theme by <a href="https://sendtoinc.com">Inc</a></p>
      </div>
  </footer>

  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="/assets/main.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=253595308025739";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>
    (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = '//hnbutton.appspot.com/static/hn.min.js';
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44262937-1', 'http://ropengov.github.io');
  ga('send', 'pageview');
</script>



  </body>
</html>